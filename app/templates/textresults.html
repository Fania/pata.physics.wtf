{% extends "base.html" %}

{% block content %}

{% include "header.html" %}

<article class="w3-text-theme">

<!-- <header class="w3-container w3-theme-l4">
    <h2><i class="fa fa-book"></i> <strong>Text</strong> S<span class="mirror">e</span>arch
      <i class="fa fa-hand-spock-o fa-5x"></i>
    </h2>
</header> -->

<div class="w3-container w3-padding">
  <form action="../textresults" method="post">
    <div class="w3-group">
      <input class="w3-input" name="query" autofocus="autofocus" type="text" required><label class="w3-label">Search</label>
      <button type="submit" class="w3-btn w3-theme-l2 fanbtn">
        <i class="fa fa-search"></i></button>
    </div>
  </form>
  <hr>
  <nav class="tabs w3-topnav w3-margin">
    <a class="active" href="#tab1">Poetry</a>
    <a href="#tab2">Sources</a>
    <a href="#tab3">Algorithms</a>
  </nav>
  <hr>
</div>

<!-- <div class="w3-container"> -->
  <!-- <div class="trail">
      <i class="fa fa-caret-right"></i> {{ query }}
      {# {% for item in s.queries %}
          {{ query }} <strong><a href="?query={{ item }}">{{ item }}</a></strong>
      {% endfor %} #}
  </div> -->

<div class="w3-container w3-padding">
  <span>Searched for: &nbsp;&nbsp; <form class="inform" action="../textresults" method="post"><input class="inlink" type="submit" name="query" value="{{ query }}"></input></form></span>
  <span title="Results - Reverberations - Origins">&nbsp;&nbsp;= &nbsp;&nbsp;{{ all_tot }} - {{ all_words|length }} - {{ all_files|length }}</span>
</div>

<!-- TABS -->
<div class="w3-container tab_container w3-padding-0">

<!-- all_sens = [(title, (pre, word, post), algorithm), ...] -->

<!-- POETRY -->
<div id="tab1" class="tab_content">

  <header class="w3-container w3-theme-l4">
      <h2 title="Number of possible poems: {{ all_poems }} !">
        Poetry *</h2>
  </header>
  <div class="w3-container">
    <p>
      Displayed in <a href="http://www.growndodo.com/wordplay/oulipo/10%5e14sonnets.html" title="Inspired by Raymond Queneau's Cent Mille Milliards de poÃ¨mes" target="_blank">
      Raymond Queneau</a> style. Hover for source and algorithm.
    </p>
  </div>

  <div class="w3-container w3-theme-l5 w3-padding-top w3-padding-bottom">
  {% for n in range(1,  lol|length + 1 ) %}
    {% set wid = ['wn', n|string]|join %}
    {% set lid = ['lyr', n|string]|join %}
    {% set sid = ['scrollLinks', n|string]|join %}
    {% set aid = lol[n-1] %}
    <div id="poems">
      <div id="{{wid}}" class="wn">
        <div id="{{lid}}" class="lyr">
          {% for sens in aid %}<span title="{{ sens[0] }}, {{ sens[2] }}">{{ sens[1][0] }} <form class="inform" action="../textresults" method="post"><input class="inlink" type="submit" name="query" value="{{ sens[1][1] }}"></input></form> {{ sens[1][2] }}</span>{% endfor %}
        </div>
      </div>
      <div id="{{sid}}" class="scrollLinks"></div>
    </div>
  {% endfor %}
  </div>

</div><!-- end tab poems -->

<!-- all_sens = [(title, (pre, word, post), algorithm), ...] -->

<!-- SOURCES -->
<div id="tab2" class="tab_content">
  <header class="w3-container w3-theme-l4">
      <h2>Sources</h2>
  </header>
  <div class="w3-container">
    <p>
      Sorted by source. Hover for algorithm.
    </p>
  </div>

  <div class="w3-container w3-theme-l5 w3-padding-top w3-padding-bottom">
    {% for file in all_files %}
      <div class="w3-padding-top w3-padding-bottom">
        <strong>{{ file }}</strong> <a href="#"><i class="fa fa-chevron-up"></i></a>
      </div>
      <ul class="w3-ul">
        {% for sens in all_sens %}
          {% if file == sens[0] %}
            <li title="{{ sens[2] }}">...{{ sens[1][0] }} <form class="inform" action="../textresults" method="post"><input class="inlink" type="submit" name="query" value="{{ sens[1][1] }}"></input></form> {{ sens[1][2] }}...</li>
          {% endif %}
        {% endfor %}
      </ul>
      <br>
    {% endfor %}
  </div>
</div><!-- end tab sources -->

      <!-- all_sens = [(title, (pre, word, post), algorithm), ...] -->

<!-- ALGORITHMS -->
<div id="tab3" class="tab_content">
  <header class="w3-container w3-theme-l4">
    <h2>Algorithms</h2>
  </header>
  <div class="w3-container">
    <p>
      Sorted by algorithm. Hover for source.
    </p>
  </div>
  <hr>
  <div class="w3-container w3-margin">
    <nav class="w3-topnav tabx">
      <a href="#clinamen">Clinamen</a>
      <a href="#syzygy">Syzygy</a>
      <a href="#antinomy">Antinomy</a>
    </nav>
  </div>

  <div class="w3-container w3-theme-l5 w3-padding-top w3-padding-bottom">
    {% for algo in ['Clinamen', 'Syzygy', 'Antinomy'] %}
      {% if algo == 'Clinamen' %}
        <div id="clinamen" class="w3-padding-top w3-padding-bottom">
          {% if clin_sens|length > 0 %}
          <strong>
            Clinamen - {{ clin_sens|length }} results for {{ clin_words|length }} pataphysicalised {% if clin_words|length == 1 %}reverberation{% else %}reverberations{% endif %} found in {{ clin_files|length }} {% if clin_files|length == 1 %}origin{% else %}origins{% endif %}. <a href="#"><i class="fa fa-chevron-up"></i></a>
          </strong>
          {% else %}
          <strong>
            Clinamen - Sorry, no pataphysicalised reverberations found!
            <a href="#"><i class="fa fa-chevron-up"></i></a>
          </strong>
          {% endif %}
        </div>
      {% endif %}
      {% if algo == 'Syzygy' %}
        <div id="syzygy" class="w3-padding-top w3-padding-bottom">
          {% if sys_sens|length > 0 %}
          <strong>
            Syzygy - {{ sys_sens|length }} results for {{ sys_words|length }} pataphysicalised {% if sys_words|length == 1 %}reverberation{% else %}reverberations{% endif %} found in {{ sys_files|length }} {% if sys_files|length == 1 %}origin{% else %}origins{% endif %}. <a href="#"><i class="fa fa-chevron-up"></i></a>
          </strong>
          {% else %}
          <strong>
            Syzygy - Sorry, no pataphysicalised reverberations found!
            <a href="#"><i class="fa fa-chevron-up"></i></a>
          </strong>
          {% endif %}
        </div>
      {% endif %}
      {% if algo == 'Antinomy' %}
        <div id="antinomy" class="w3-padding-top w3-padding-bottom">
          {% if anti_sens|length > 0 %}
          <strong>
            Antinomy - {{ anti_sens|length }} results for {{ anti_words|length }} pataphysicalised {% if anti_words|length == 1 %}reverberation{% else %}reverberations{% endif %} found in {{ anti_files|length }} {% if anti_files|length == 1 %}origin{% else %}origins{% endif %}. <a href="#"><i class="fa fa-chevron-up"></i></a>
          </strong>
          {% else %}
          <strong>
            Antinomy - Sorry, no pataphysicalised reverberations found!
            <a href="#"><i class="fa fa-chevron-up"></i></a>
          </strong>
          {% endif %}
        </div>
      {% endif %}
      <ul class="w3-ul w3-padding">
        {% for sens in all_sens %}
          {% if sens[2] == algo %}
            <li title="{{ sens[0] }}">...{{ sens[1][0] }} <form class="inform" action="../textresults" method="post"><input class="inlink" type="submit" name="query" value="{{ sens[1][1] }}"></input></form> {{ sens[1][2] }}...</li>
          {% endif %}
        {% endfor %}
      </ul>
    {% endfor %}
  </div>
</div><!-- end tab algorithms -->

  </div><!-- end tab_container -->

<!-- </div> -->
<!-- end main container -->

</article>

{% endblock %}
